package formularios;

import Classes.Servico;
import Classes.StatusRegistro;
import ClassesDao.ServicoDAO;
import ClassesEnum.ServicoProduto;
import Formatadores.LetrasMaiusculas;
import Formatadores.MonetarioDocument;
import Formatadores.TratarMoeda;
import GeradorID.gerarId;
import java.awt.Color;
import java.awt.Dimension;

public class FrmServico extends javax.swing.JInternalFrame {

    private int idServico = 0;

    public FrmServico(int id) {
        initComponents();
        txtDescricao.setDocument(new LetrasMaiusculas());
        jtxtValor.setDocument(new MonetarioDocument());
        this.idServico = id;

        if (this.idServico > 0) {
            carregarServico(this.idServico);
        } else {
            jtxtValor.setText("000");
        }
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        pnlPrincipal = new javax.swing.JPanel();
        lblDescricao = new javax.swing.JLabel();
        txtDescricao = new javax.swing.JTextField();
        lblValor = new javax.swing.JLabel();
        jtxtValor = new javax.swing.JFormattedTextField();
        btnFechar = new javax.swing.JButton();
        btnSalvar = new javax.swing.JButton();

        setBackground(new java.awt.Color(255, 255, 255));
        setTitle("Cadastro de Serviço");
        setPreferredSize(new java.awt.Dimension(416, 196));
        getContentPane().setLayout(new java.awt.GridLayout(1, 0));

        pnlPrincipal.setBackground(new java.awt.Color(255, 255, 255));
        pnlPrincipal.setPreferredSize(new java.awt.Dimension(416, 196));
        pnlPrincipal.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblDescricao.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        lblDescricao.setText("Descrição");
        lblDescricao.setName("lblDescricao"); // NOI18N
        pnlPrincipal.add(lblDescricao, new org.netbeans.lib.awtextra.AbsoluteConstraints(15, 30, -1, -1));

        txtDescricao.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        txtDescricao.setForeground(new java.awt.Color(51, 51, 51));
        txtDescricao.setName("txtDescricao"); // NOI18N
        txtDescricao.setPreferredSize(new java.awt.Dimension(220, 25));
        txtDescricao.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtDescricaoActionPerformed(evt);
            }
        });
        pnlPrincipal.add(txtDescricao, new org.netbeans.lib.awtextra.AbsoluteConstraints(15, 50, 220, -1));

        lblValor.setFont(new java.awt.Font("Arial", 0, 14)); // NOI18N
        lblValor.setText("Valor sugerido");
        lblValor.setName("lblValor"); // NOI18N
        pnlPrincipal.add(lblValor, new org.netbeans.lib.awtextra.AbsoluteConstraints(255, 30, -1, -1));

        jtxtValor.setForeground(new java.awt.Color(51, 51, 51));
        jtxtValor.setFont(new java.awt.Font("Arial", 0, 12)); // NOI18N
        jtxtValor.setName("jtxtValor"); // NOI18N
        jtxtValor.setPreferredSize(new java.awt.Dimension(120, 25));
        pnlPrincipal.add(jtxtValor, new org.netbeans.lib.awtextra.AbsoluteConstraints(255, 50, -1, -1));

        btnFechar.setBackground(new java.awt.Color(249, 105, 14));
        btnFechar.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        btnFechar.setForeground(new java.awt.Color(255, 255, 255));
        btnFechar.setText("Fechar");
        btnFechar.setBorderPainted(false);
        btnFechar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnFechar.setName("btnFechar"); // NOI18N
        btnFechar.setPreferredSize(new java.awt.Dimension(90, 40));
        btnFechar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                btnFecharMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                btnFecharMouseExited(evt);
            }
        });
        btnFechar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFecharActionPerformed(evt);
            }
        });
        pnlPrincipal.add(btnFechar, new org.netbeans.lib.awtextra.AbsoluteConstraints(175, 110, -1, -1));

        btnSalvar.setBackground(new java.awt.Color(1, 50, 67));
        btnSalvar.setFont(new java.awt.Font("Arial", 1, 14)); // NOI18N
        btnSalvar.setForeground(new java.awt.Color(255, 255, 255));
        btnSalvar.setText("Salvar");
        btnSalvar.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        btnSalvar.setName("btnSalvar"); // NOI18N
        btnSalvar.setPreferredSize(new java.awt.Dimension(90, 40));
        btnSalvar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseEntered(java.awt.event.MouseEvent evt) {
                btnSalvarMouseEntered(evt);
            }
            public void mouseExited(java.awt.event.MouseEvent evt) {
                btnSalvarMouseExited(evt);
            }
        });
        btnSalvar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSalvarActionPerformed(evt);
            }
        });
        pnlPrincipal.add(btnSalvar, new org.netbeans.lib.awtextra.AbsoluteConstraints(285, 110, -1, -1));

        getContentPane().add(pnlPrincipal);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void btnSalvarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnSalvarActionPerformed

        Servico servico = new Servico();
        servico.setSer_Des(txtDescricao.getText());
        servico.setSer_Val(TratarMoeda.Moeda(jtxtValor.getText()));
        servico.setSer_Tip(ServicoProduto.SERVICO.toString());
        servico.setSer_Sta(StatusRegistro.ATIVO.toString());

        if (this.idServico > 0) {
            servico.setSer_Cod(this.idServico);
            ServicoDAO.alterarServico(servico);
        } else {
            servico.setSer_Cod(gerarId.gerarIDProdutoServico());
            this.idServico = servico.getSer_Cod();
            ServicoDAO.gravarServico(servico);
        }
    }//GEN-LAST:event_btnSalvarActionPerformed

    private void btnSalvarMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnSalvarMouseExited
        btnSalvar.setBackground(new Color(1, 50, 67));
        btnSalvar.setForeground(Color.WHITE);
        btnSalvar.setFont(new java.awt.Font("Arial", 1, 14));
        //hora que o mouse sai de cima
    }//GEN-LAST:event_btnSalvarMouseExited

    private void btnSalvarMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnSalvarMouseEntered
        btnSalvar.setBackground(new Color(1, 50, 90));////(58, 83, 155));
        btnSalvar.setForeground(Color.WHITE);
        btnSalvar.setFont(new java.awt.Font("Arial", 1, 16));
        //passa o mouse em cima
    }//GEN-LAST:event_btnSalvarMouseEntered

    private void btnFecharActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnFecharActionPerformed
        FrmListaServico listaServico = new FrmListaServico();
        frmMenuPrincipal.JDesktopPanePrincipall.add(listaServico);
        listaServico.setVisible(true);
        listaServico.setPosicao();
        dispose();
    }//GEN-LAST:event_btnFecharActionPerformed

    private void btnFecharMouseExited(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnFecharMouseExited
        btnFechar.setBackground(new Color(249, 105, 14));
        btnFechar.setForeground(Color.WHITE);
        btnFechar.setFont(new java.awt.Font("Arial", 1, 14));
    }//GEN-LAST:event_btnFecharMouseExited

    private void btnFecharMouseEntered(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_btnFecharMouseEntered
        btnFechar.setBackground(new Color(249, 105, 40));
        btnFechar.setForeground(Color.WHITE);
        btnFechar.setFont(new java.awt.Font("Arial", 1, 16));
    }//GEN-LAST:event_btnFecharMouseEntered

    private void txtDescricaoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtDescricaoActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txtDescricaoActionPerformed

    private void carregarServico(int cod) {

        Servico servico = ServicoDAO.carregarServico(cod);
        txtDescricao.setText(servico.getSer_Des());
        jtxtValor.setText(TratarMoeda.FormatarMoeda(servico.getSer_Val()));
    }

    public void setPosicao() {
        Dimension d = this.getDesktopPane().getSize();
        this.setLocation((d.width - this.getSize().width) / 2, (d.height - this.getSize().height) / 2);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnFechar;
    private javax.swing.JButton btnSalvar;
    private javax.swing.JFormattedTextField jtxtValor;
    private javax.swing.JLabel lblDescricao;
    private javax.swing.JLabel lblValor;
    private javax.swing.JPanel pnlPrincipal;
    private javax.swing.JTextField txtDescricao;
    // End of variables declaration//GEN-END:variables
}
